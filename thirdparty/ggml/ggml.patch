diff --git a/examples/llava/llava.h b/examples/llava/llava.h
index 19212f6e..40a731c5 100644
--- a/examples/llava/llava.h
+++ b/examples/llava/llava.h
@@ -18,6 +18,7 @@
 #endif
 
 struct clip_ctx;
+struct clip_image_u8;
 
 #ifdef __cplusplus
 extern "C" {
diff --git a/llama.cpp b/llama.cpp
index a25d115c..860b38c5 100644
--- a/llama.cpp
+++ b/llama.cpp
@@ -17462,7 +17462,9 @@ static void llama_log_internal(ggml_log_level level, const char * format, ...) {
 
 static void llama_log_callback_default(ggml_log_level level, const char * text, void * user_data) {
     (void) level;
-    (void) user_data;
-    fputs(text, stderr);
-    fflush(stderr);
+    bool * enable_log = static_cast<bool *>(user_data);
+    if (enable_log && *enable_log) {
+        fputs(text, stderr);
+        fflush(stderr);
+    }
 }
