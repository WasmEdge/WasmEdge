<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Creation of the WasmEdge_FunctionInstanceContext for host functions."><meta name="keywords" content="rust, rustlang, rust-lang, WasmEdge_FunctionInstanceCreateBinding"><title>WasmEdge_FunctionInstanceCreateBinding in wasmedge_sys::ffi - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/cncf/artwork/49169bdbc88a7ce3c4a722c641cc2d548bd5c340/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../wasmedge_sys/index.html"><img src="https://github.com/cncf/artwork/blob/master/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.png?raw=true" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../wasmedge_sys/index.html">
                <img src="https://github.com/cncf/artwork/blob/master/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.png?raw=true" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In wasmedge_sys::ffi</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">wasmedge_sys</a>::<wbr><a href="index.html">ffi</a>::<wbr><a class="fn" href="#">WasmEdge_FunctionInstanceCreateBinding</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/wasmedge_sys/__w/WasmEdge/WasmEdge/bindings/rust/target/debug/build/wasmedge-sys-2874c6a5be943850/out/wasmedge.rs.html#3">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust"><code>pub unsafe extern &quot;C&quot; fn WasmEdge_FunctionInstanceCreateBinding(<br>&nbsp;&nbsp;&nbsp;&nbsp;Type: <a class="primitive" href="https://doc.rust-lang.org/1.68.2/std/primitive.pointer.html">*const </a><a class="struct" href="struct.WasmEdge_FunctionTypeContext.html" title="struct wasmedge_sys::ffi::WasmEdge_FunctionTypeContext">WasmEdge_FunctionTypeContext</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;WrapFunc: <a class="type" href="type.WasmEdge_WrapFunc_t.html" title="type wasmedge_sys::ffi::WasmEdge_WrapFunc_t">WasmEdge_WrapFunc_t</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Binding: <a class="primitive" href="https://doc.rust-lang.org/1.68.2/std/primitive.pointer.html">*mut </a><a class="type" href="https://doc.rust-lang.org/1.68.2/std/os/raw/type.c_void.html" title="type std::os::raw::c_void">c_void</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Data: <a class="primitive" href="https://doc.rust-lang.org/1.68.2/std/primitive.pointer.html">*mut </a><a class="type" href="https://doc.rust-lang.org/1.68.2/std/os/raw/type.c_void.html" title="type std::os::raw::c_void">c_void</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Cost: <a class="primitive" href="https://doc.rust-lang.org/1.68.2/std/primitive.u64.html">u64</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.68.2/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.WasmEdge_FunctionInstanceContext.html" title="struct wasmedge_sys::ffi::WasmEdge_FunctionInstanceContext">WasmEdge_FunctionInstanceContext</a></code></pre></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Creation of the WasmEdge_FunctionInstanceContext for host functions.</p>
<p>This function is for the languages which cannot pass the function pointer of
the host function into this shared library directly. The caller owns the
object and should call <code>WasmEdge_FunctionInstanceDelete</code> to destroy it if
the returned object is not added into a <code>WasmEdge_ModuleInstanceContext</code>.
The following is an example to create a host function context for other
languages.</p>
<div class="example-wrap"><pre class="language-c"><code>// `RealFunc` is the pointer to the function in other languages.

WasmEdge_Result FuncAddWrap(
    void *This, void *Data,
    const WasmEdge_CallingFrameContext *CallFrameCxt,
    const WasmEdge_Value *In, const uint32_t InLen, WasmEdge_Value *Out,
    const uint32_t OutLen) {
  // Wrapper function of host function to return A + B.

  // `This` is the same as `RealFunc`.
  int32_t A = WasmEdge_ValueGetI32(In[0]);
  int32_t B = WasmEdge_ValueGetI32(In[1]);

  // Call the function of `This` in the host language ...
  int32_t Result = ...;

  Out[0] = Result;
  // Return the execution status.
  return WasmEdge_Result_Success;
}

enum WasmEdge_ValType Params[2] = {WasmEdge_ValType_I32,
                                   WasmEdge_ValType_I32};
enum WasmEdge_ValType Returns[1] = {WasmEdge_ValType_I32};
WasmEdge_FunctionTypeContext *FuncType =
    WasmEdge_FunctionTypeCreate(Params, 2, Returns, 1);
WasmEdge_FunctionInstanceContext *HostFunc =
    WasmEdge_FunctionInstanceCreateBinding(
        FuncType, FuncAddWrap, RealFunc, NULL, 0);
WasmEdge_FunctionTypeDelete(FuncType);
...
</code></pre></div>
<p>\param Type the function type context to describe the host function
signature.
\param WrapFunc the wrapper function pointer. The wrapper function signature
must be as following:</p>
<div class="example-wrap"><pre class="language-c"><code>typedef WasmEdge_Result (*WasmEdge_WrapFunc_t)(
    void *This,
    void *Data,
    WasmEdge_CallingFrameContext *FrameCxt,
    const WasmEdge_Value *Params,
    const uint32_t ParamLen,
    WasmEdge_Value *Returns,
    const uint32_t ReturnLen);
</code></pre></div>
<p>The <code>This</code> is the pointer the same as the <code>Binding</code> parameter of this
function. The <code>Params</code> is the input parameters array with length guaranteed
to be the same as the parameter types in the <code>Type</code>, and the <code>ParamLen</code> is
the length of the array. The <code>Returns</code> is the output results array with
length guaranteed to be the same as the result types in the <code>Type</code>, and the
<code>ReturnLen</code> is the length of the array. The return value is
<code>WasmEdge_Result</code> for the execution status.
\param Binding the <code>this</code> pointer of the host function target or the
function indexing maintained by the caller which can specify the host
function. When invoking the host function, this pointer will be the first
argument of the wrapper function.
\param Data the additional object, such as the pointer to a data structure,
to set to this host function context. The caller should guarantee the life
cycle of the object. NULL if the additional data object is not needed.
\param Cost the function cost in statistics. Pass 0 if the calculation is
not needed.</p>
<p>\returns pointer to context, NULL if failed.</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="wasmedge_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.2 (9eb3afe9e 2023-03-27)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>